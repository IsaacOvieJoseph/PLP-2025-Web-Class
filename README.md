# PLP-2025-Web-Class
My WebClass Assignment Repo


# üìß Email Service Automated Tests

This project contains **automated functional tests** for the Email Service microservice.  
It uses **Postman + Newman** for test execution and **Newman HTML Extra Reporter** for beautiful HTML reports.

## Structure

- **Automated-API-Test-Framework/**  
  Main test framework containing:
  - `EmailServiceTests.postman_collection.json`: Postman collection for Email Micro-Service functional tests.
  - `package.json`: Scripts for running Newman tests and generating reports.
  - `README.md`: Framework usage instructions.
  - `newman/`: Directory for generated test reports.

## Usage

1. **Install Dependencies**  
   Ensure [Node.js](https://nodejs.org/) and [Newman](https://www.npmjs.com/package/newman) are installed.

2. **Run Tests**  
   Navigate to `Automated-API-Test-Framework` and run:
   ```sh
   npm test
   ```

3. **Generate HTML Report**  
   Run:
   ```sh
   npm run report
   ```
   The report will be saved in the `newman/` folder.

# Contents

- **EmailServiceTests.postman_collection.json**  
  Contains functional test cases for the `/send-email` API, including:
  - Valid email request
  - Missing 'to' field
  - Invalid email format
  - Simulate queue full

- **newman/EmailServiceTests-report.html**  
  Example HTML report generated by Newman.

# Notes & Assumptions
 - The simulateQueueFull=true query parameter is assumed to exist to test 503 Service Unavailable.
 - These tests validate API contract & error handling, not actual email delivery.
 - For security/load tests, additional scripts/tools would be required.


# 2. Clone this Repository
``` sh
  git clone https://github.com/IsaacOvieJoseph/email-service-tests.git
  cd email-service-tests
```

# 3. Install Dependencies
   ``` sh
       npm install
   ```

# ‚ñ∂Ô∏è Running Tests
 ## Run Tests (Report in CLI only)
``` sh
      npm run test
```

## Run Tests with HTML Report
``` sh
    npm run report
```

## Run Tests with Timestamped Report
``` sh
    npm run report:timestamp
```


# ‚öôÔ∏è Adjusting Tests to Your API

You can easily configure the collection to match your own API endpoint and payload.

## Option 1: Change the Base URL in Scripts

Edit **package.json** and replace the **baseUrl** value in the scripts.
Example:

```sh
"scripts": {
  "test": "newman run EmailServiceTests.postman_collection.json --env-var baseUrl=https://api.yourdomain.com"
}
```

Now all requests will hit https://api.yourdomain.com.

## Option 2: Edit the Postman Collection

Open Postman.

Import **EmailServiceTests.postman_collection.json** .

Update the request endpoint to your API (e.g., /api/v1/sendEmail).

Adjust the request body fields if your API requires different keys.
Example:

``` sh
{
  "recipient": "user@example.com", 
  "subject": "Welcome!",
  "content": "Thanks for signing up."
}
```

Export the updated collection and replace the JSON file in this repo.

## Option 3: Use Environment Variables (Best Practice)

Instead of editing scripts, you can pass your API dynamically at runtime:

```sh 
     newman run EmailServiceTests.postman_collection.json --env-var baseUrl=https://staging.yourdomain.com
```

This avoids hardcoding and makes switching between local / staging / production easy.

# üìå Notes

If your API uses auth tokens (e.g., Bearer token), add them under Authorization in Postman before exporting.

If your API has different error codes, update the test assertions in Postman accordingly.

If your payload structure differs (different field names), you must update the request body in the collection.
